<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 상품 SQL -->
<!-- comment by seo -->
<mapper namespace="goods">

<!-- 상품 리스트  -->
<select id="goodsList" resultType="hashmap">
	<![CDATA[
		
		SELECT * FROM SG_GOODS where GOODS_ONOFF=0
	]]>
	</select>

<!-- 상품 상세보기 -->
<select id="selectOneGoods" parameterType="int" resultType="hashmap">
	<![CDATA[
		
	select * from SG_GOODS
	where GOODS_NO = #{GOODS_NO}
	]]>
	</select>
	
	<!-- 이미지 가져오기 -->
	<select id="imageList" parameterType="int" resultType="string">
	<![CDATA[
		
	SELECT IMAGE_IMAGE FROM SG_IMAGE
	where IMAGE_GOODS_NO = #{GOODS_NO}
	
	]]>
	</select>
	
	<!-- 후기 리스트  -->
	<select id="commentList" parameterType="int" resultType="hashmap">
	
	<![CDATA[
		
	select * 
	from SG_COMMENT
	where COMMENT_GOODS_NO= #{GOODS_NO}
	ORDER BY COMMENT_REGDATE desc
	
	]]>
	
	</select>
	
	<!-- 후기 작성 -->
	<insert id="insertComment" parameterType="hashmap">

		insert into SG_COMMENT 
		(COMMENT_NO, 
		COMMENT_ID, 
		COMMENT_GOODS_NO, 
		COMMENT_CONTENT, 
		COMMENT_RATE, 
		COMMENT_REGDATE)
		values
		(SG_COMMENT_NO_SEQ.NEXTVAL,
		#{COMMENT_ID},
		#{COMMENT_GOODS_NO},
		#{COMMENT_CONTENT},
		#{COMMENT_RATE},
		SYSDATE)
				
			
	</insert>
<!-- comment by seo -->
</mapper>